# =============================================================================
# VERCEL DEPLOYMENT CHECKLIST
# =============================================================================
# Set ALL of these in: Vercel → Project → Settings → Environment Variables
#
# CRITICAL: Each var must have BOTH "Production" AND "Preview" checkboxes
# enabled. PR/branch deploys use the "Preview" environment — vars set only
# for "Production" will NOT be available during PR builds or preview deployments.
#
# ── CLIENT-SIDE (required for build to pass) ──────────────────────────────
#   EXPO_PUBLIC_FIREBASE_API_KEY
#   EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN
#   EXPO_PUBLIC_FIREBASE_PROJECT_ID
#   EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET
#   EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
#   EXPO_PUBLIC_FIREBASE_APP_ID
#
# ── SERVER-SIDE (required for API serverless function — missing = 500 errors) ─
#   DATABASE_URL        ← Neon/PostgreSQL connection string
#   SESSION_SECRET      ← min 32 chars random hex
#   JWT_SECRET          ← min 32 chars random hex (different from SESSION_SECRET)
#
# ── FIREBASE ADMIN (required for login to work) ───────────────────────────
#   FIREBASE_PROJECT_ID      ← same value as EXPO_PUBLIC_FIREBASE_PROJECT_ID
#   FIREBASE_CLIENT_EMAIL    ← from Firebase service account JSON
#   FIREBASE_PRIVATE_KEY     ← from Firebase service account JSON (keep \n chars)
#
# Diagnostic endpoint (after deploy): https://your-app.vercel.app/api/health/env
# =============================================================================

# App Environment
NODE_ENV=development
PORT=3001

# =============================================================================
# UNIVERSAL ENV VARS (work in web + mobile)
# Use EXPO_PUBLIC_ prefix for all client-side config
# =============================================================================

# Environment: 'prod' | 'staging' | 'local'
EXPO_PUBLIC_APP_ENV=local

# API Configuration
EXPO_PUBLIC_API_BASE_URL=http://localhost:3001
EXPO_PUBLIC_CANONICAL_ORIGIN=http://localhost:3000

# Firebase (universal) — get these from Firebase Console > Project Settings
EXPO_PUBLIC_FIREBASE_API_KEY=
EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN=
EXPO_PUBLIC_FIREBASE_PROJECT_ID=
EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET=
EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
EXPO_PUBLIC_FIREBASE_APP_ID=
EXPO_PUBLIC_FIREBASE_MEASUREMENT_ID=

# Firebase App IDs for environment guardrails (single-project separation)
# Create separate "Web Apps" in Firebase Console for prod/staging
EXPO_PUBLIC_FIREBASE_APP_ID_PROD=
EXPO_PUBLIC_FIREBASE_APP_ID_STAGING=

# ReCAPTCHA v3 site key for Firebase App Check
EXPO_PUBLIC_RECAPTCHA_SITE_KEY=

# =============================================================================
# SERVER-ONLY SECRETS (never expose to client)
# =============================================================================

# Database
DATABASE_URL=postgresql://user:password@host:5432/database

# Security & Auth
SESSION_SECRET=your-session-secret-min-32-chars
# JWT signing key — REQUIRED in all environments, minimum 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=
# Dedicated encryption key for MFA TOTP secrets — REQUIRED in production, minimum 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
MFA_ENCRYPTION_KEY=
# Firebase Admin SDK credentials (required for auth token verification / login)
# Option A: Single JSON blob from Firebase Console → Project Settings → Service Accounts
FIREBASE_ADMIN_KEY=
# Option B: Individual fields (alternative to FIREBASE_ADMIN_KEY above)
FIREBASE_PROJECT_ID=
FIREBASE_CLIENT_EMAIL=
FIREBASE_PRIVATE_KEY=

# Stripe
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Note: Stripe publishable key is public by design (safe in client)
EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY=

# Third-party APIs
OPENAI_API_KEY=
GOOGLE_AI_API_KEY=
RESEND_API_KEY=

# Email (if using SMTP)
EMAIL_USER=
EMAIL_APP_PASSWORD=

# Admin
ADMIN_API_KEY=

# Monitoring (DSN is safe to expose - use EXPO_PUBLIC_ for client)
SENTRY_DSN=
EXPO_PUBLIC_SENTRY_DSN=

# CORS — comma-separated origins allowed for API and WebSocket connections
# Required in production; dev auto-includes localhost variants
ALLOWED_ORIGINS=https://skatehubba.com

# URLs
PRODUCTION_URL=https://skatehubba.com
EXPO_PUBLIC_DONATE_STRIPE_URL=
EXPO_PUBLIC_DONATE_PAYPAL_URL=

# Redis (optional — enables caching and session store)
REDIS_URL=redis://localhost:6379

# Cron job endpoint protection (recommended in production, min 16 chars)
CRON_SECRET=

# Logging (error | warn | info | debug)
LOG_LEVEL=info

# Firebase App Check enforcement (monitor | warn | enforce)
# monitor: log only (default, safe for gradual rollout)
# warn:    add warning header but allow request
# enforce: reject requests without a valid App Check token
APP_CHECK_MODE=monitor

# Firebase App Check debug token (development only — never set in production)
EXPO_PUBLIC_APP_CHECK_DEBUG_TOKEN=

# Spot check-in radius in metres (default 100)
CHECK_IN_RADIUS_METERS=100

# =============================================================================
# GOOGLE OAUTH (mobile)
# =============================================================================
EXPO_PUBLIC_GOOGLE_IOS_CLIENT_ID=
EXPO_PUBLIC_GOOGLE_ANDROID_CLIENT_ID=
EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID=

# =============================================================================
# DEV PORT OVERRIDES
# =============================================================================
DEV_VITE_PORT=3000
DEV_CLIENT_PORT=3000
DEV_EMAIL_PORT=1025
